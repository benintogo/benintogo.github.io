<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Filter Taxonomies within Map View</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 25%;
            /* Adjust this to match the initial width of the sidebar */
            transition: left 0s;
            /* Smooth transition for map adjustment */
        }

        #sidebar {
            padding-right: 10px;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 25%;
            /* Adjust the initial width of the sidebar here */
            overflow-x: hidden;
            /* Prevents horizontal scroll on the sidebar */
            z-index: 2;
            /* Ensures that the sidebar is above the map */
            transition: width 0s;
            /* Smooth transition for sidebar width */
        }

        .map-overlay input {
            display: block;
            border: none;
            width: 100%;
            border-radius: 3px;
            padding: 10px;
            margin: 0;
            box-sizing: border-box;
        }

        .map-overlay .listing {
            overflow: auto;
            max-height: 100%;
        }

        .map-overlay .listing a {
            display: block;
            padding: 5px 10px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            color: #404;
            text-decoration: none;
        }

        .map-overlay .listing a:last-child {
            border: none;
        }

        .map-overlay .listing a:hover {
            background: #f0f0f0;
        }

        .mapboxgl-popup-content {
            scroll-behavior: auto;
            overflow: auto;
            /* Adjust content overflow as needed */
            resize: both;
            /* Enable resizing in both directions */
            min-width: 200px;
            /* Minimum width */
            min-height: 200px;
            /* Minimum height */
            max-width: none;
            /* Remove maximum width restriction */
            width: 300px;
            height: 50vh;
            max-height: 80vh;
            /* Remove maximum width restriction */
            overflow-y: auto;
            overflow-x: hidden;
        }


        @media only screen and (max-width: 600px) {

            /* Adjust max-width as needed */
            .mapboxgl-popup {
                display: flex;
                flex-direction: column;
                overflow: hidden;
                /* Hide overflow */
                width: 97%;
                /* Or any other width you prefer */
                max-width: 350px;
                /* This can help if there is a max-width set by default */
            }

            .mapboxgl-popup-content {
                width: 97%;
                /* Or any other width you prefer */
                max-width: 350px;
                /* This can help if there is a max-width set by default */
                height: 370px;
                /* Adjust if a fixed height is needed */
                font-size: 10px;
                /* Adjust text size as needed */
                overflow-y: auto;
                /* Allows scrolling within the popup */
                overflow-x: hidden;
                padding-top: 0;
                /* Remove padding from the top */
                padding-left: 0;
                /* Remove padding from the left */
                border: none;
                /* Replace #ccc with the color of your choice */
            }

            .mapboxgl-popup .mapboxgl-popup-tip {
                display: none;
                /* Optionally hide the tip arrow on smaller screens */
            }

            /* Adjustments to internal popup content */
            .popup-flex-container,
            .search-bar-container,
            .popup-content-details {
                padding: 5px;
                /* Consistent padding for mobile */
            }

            .collapsible-header,
            .result-item {
                font-size: 10px;
                /* Smaller font size for titles and results */
            }

            /* Adjust button sizes */
            .expand-all-btn,
            .collapse-all-btn {
                padding: 5px;
                /* Adjust padding for buttons */
                font-size: 10px;
                /* Smaller text on buttons */
                width: 97%;
                /* Or any other width you prefer */
                max-width: 350px;
                /* Maximum width of the search bar */
                margin: 0 2px;
                /* Add some margin between buttons */
            }

            /* Adjust input field size */
            .popup-flex-container input[type="text"] {
                padding: 5px;
                /* Adjust padding for the input field */
                margin-bottom: 5px;
                /* Margin below the search bar */
                width: 97%;
                /* Or any other width you prefer */
                max-width: 350px;
                /* Maximum width of the search bar */
                font-size: 10px;
                /* Adjust font size if necessary */
                height: 30px;
                /* Adjust height of the search bar if needed */
                border: 1px solid #ccc;
                /* Same color as the popup border */
            }
        }


        .popup-flex-container {
            display: flex;
            flex-direction: column;
            /* height: 400px; */
            /* Set the initial fixed height */
            position: relative;
            scroll-behavior: auto;
            max-width: none;
            background-color: white;
        }

        .popup-flex-container input[type="text"] {
            flex: 0 0 auto;
            width: 100%;
            padding: 5px;
            margin-bottom: 15px;
            margin-top: 15px;
            box-sizing: border-box;
            scroll-behavior: auto;
            background-color: white;
        }

        .popup-content-details {
            flex: 1;
            overflow-y: auto;
            scroll-behavior: auto;
            padding: 10px;
            padding-top: 0px;
            /* Add padding-top equal to the height of the search bar to prevent content from hiding under it */
        }

        .search-container {
            padding: 10px;
            background-color: white;
            /* Ensures the background is solid */
            z-index: 100;
            /* Ensures that the search bar is above the content. Adjust if necessary. */
            position: sticky;
            top: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            /* Adds shadow for depth */
        }

        .highlighted {
            background-color: yellow;
        }


        .feature-filter {
            padding: 10px;
        }

        #feature-listing {
            overflow: auto;
        }

        .collapsible {
            margin-bottom: 5px;
        }

        .collapsible-header {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ddd;
            font-weight: bold;
        }

        .collapsible-content {
            padding: 0 10px;
            display: none;
            overflow: hidden;
            border: 1px solid #ddd;
            border-top: none;
        }

        .collapsible-arrow {
            float: right;
        }

        #filter-dropdown {
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            font-weight: bold;
            margin: 10px;
            padding: 5px;
            width: calc(100% - 20px);
        }

        #results-container {
            margin: 10px;
            padding: 5px;
            height: calc(100% - 50px);
            /* Adjust based on available space */
            overflow-y: auto;
            text-align: justify;
        }

        .result-item {
            display: flex;
            justify-content: flex-start;
            padding: 5px;
            /* Consistent padding on all sides */
            border-bottom: 1px solid #eaeaea;
            /* Consistent border for all items */
            background-color: #f9f9f9;
            /* Consistent background for all items */
            margin-bottom: 5px;
            /* Consistent margin for all items */
        }

        .result-item a {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            display: inline-block;
            max-width: calc(100% - 10px);
            /* Adjust max-width considering the padding */
            margin: 0 5px;
            /* Add margin to the links if needed */
        }

        .country-name {
            /* Styling for the country name */
            font-weight: bold;
            /* example style */
            margin-right: 8px;
            /* Adjust the value as needed */
        }

        .map-overlay {
            background-color: #fff;
            /* Match popup background */
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            border-left: 1px solid #ddd;
            /* Existing left border */
            border-right: 1px solid #ddd;
            /* Add right border */
            padding: 10px;
        }

        .drag-handle {
            right: 0;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 25.8%;
            /* Adjust this to match the initial width of the sidebar */
            width: 10px;
            /* Width of the draggable area */
            cursor: ew-resize;
            z-index: 3;
            /* Ensures that the drag handle is above the sidebar and map */
        }

        .drag-handle::after {
            content: '⋮⋮';
            /* Vertical ellipsis or another symbol for the handle */
            display: block;
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #666;
            line-height: 1;
        }


        #filter-dropdown,
        #results-container {
            background-color: #efefef;
            /* Subtle background color */
            border-radius: 3px;
            /* Rounded corners like in popup */
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
            /* Shadow for depth, similar to popup */
            margin: 10px;
            padding: 1px;
            width: calc(100% - 23px);
            /* Full width with padding */
        }

        .country-details {
            text-align: justify;
            flex-grow: 1;
            overflow-wrap: break-word;
            /* Allows unbreakable words to be broken */
            word-wrap: break-word;
            /* Ensures that words can be broken and wrapped onto the next line */
            word-break: break-word;
            /* Use this if you want to ensure breaking at the end of the line for long words or URLs */
            /* This will make the details fill up the remaining space */
            /* Adjust the width as necessary */
        }

        .collapsible-header,
        .collapsible-content {
            background-color: #f9f9f9;
            /* Consistent background with result items */
            border-color: #eaeaea;
            /* Light border color */
        }

        .objectives ul {
            list-style-type: disc;
            /* This adds the bullet point */
            padding-left: 20px;
            /* This indents the list */
        }

        .objectives li {
            margin-bottom: 10px;
            /* This adds space between list items */
            text-align: left;
            /* Ensures text is aligned to the left */
        }

        .popup-resize-handle {
            position: absolute;
            top: 0.5;
            /* Position it at the top of the popup */
            right: 0;
            /* Position it at the right of the popup */
            width: 20px;
            height: 20px;
            cursor: nwse-resize;
            background: rgba(0, 0, 0, 0.3);
            /* Visible handle */
        }

        .mapboxgl-popup-content {
            padding-top: 0px;
            /* Make sure this is at least as tall as the resize handle */
            padding-right: 20px;
            /* Make sure this is at least as wide as the resize handle */
            background-color: white;
            /* Or any other color that fits the design */
            overflow: auto;
            /* Adjust content overflow as needed */
            resize: both;
            /* Enable resizing in both directions */
            min-width: 200px;
            /* Minimum width */
            min-height: 100px;
            /* Minimum height */
            max-width: none;
            /* Remove maximum width restriction */
            overflow-x: hidden;
            word-wrap: break-word;
            /* This ensures that long words do not cause horizontal overflow */
            overflow-wrap: break-word;
        }

        .expand-all-btn,
        .collapse-all-btn {
            margin: 5px;
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }

        .expand-all-btn:hover,
        .collapse-all-btn:hover {
            background-color: #0056b3;
        }

        .popup-search-container {
            position: sticky;
            top: 0;
            z-index: 2;
            /* Ensures it stays above other content */
            background-color: white;
            /* Or any color that fits your design */
            padding: 10px;
            /* Adjust padding as needed */
            border-bottom: 1px solid #ccc;
            /* Optional: adds a subtle line to distinguish the search bar */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            /* Optional: adds shadow for depth */
        }
    </style>
</head>

<body>

    <div class="map-overlay" id="sidebar">
        <div class="update-info">
            Details as of: 28.03.2024
        </div>
        <select id="filter-dropdown">
            <option value="">Select a Category</option>
            <option value="name">Taxonomy</option>
            <option value="yearissued">Year Issued</option>
            <option value="developer">Developer</option>
            <option value="mandatedinlaworvoluntary">Mandated?</option>
            <option value="Purpose">Type</option>
            <option value="objective">Objectives</option>
            <option value="linkpolicyobjectives">Objectives of Interest</option>
            <!--<option value="Sectorclassification">Sector Classification</option>-->
            <option value="approachtoeligibility">Approach to Eligibility</option>
            <option value="sectorscovered">Sectors Covered</option>
            <option value="Socialobjectivessafeguards">Social Objectives / Safeguards</option>
            <option value="DonosignificantharmDNHS">Do No Significant Harm (DNSH)</option>
            <!--<option value="mostrecentupdate">Most Recent Update</option>-->
            <option value="Intendedtobeinteroperable">Intended to be Interoperable</option>
            <option value="Biodiversity">Biodiversity</option>
            <option value="MemberofIPFS">Member of the IPSF</option>
            <option value="link">Taxonomy Source</option>
            <option value="Additionalguidance">Additional Guidance</option>
            <option value="otherusefuldocuments">Other Useful Documents</option>
        </select>
        <div id="results-container"></div>
    </div>

    <div id="drag-handle" class="drag-handle"></div>

    <div id="map"></div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoianVuaW9yYW5hbHlzdDEiLCJhIjoiY2xranA1eHV5MHlpczNja2dieDlkZzJiciJ9.CN5Qa40PM2IMpwlyBAFTVA';

        const isMobile = window.innerWidth < 600;

        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v12',
            center: [0, 0],
            maxZoom: 5,
            minZoom: -1,
            zoom: isMobile ? -1 : 2 // Use minZoom for mobile, otherwise use 2

        });

        function renderListings(features) {
            listingEl.innerHTML = '';
            if (features.length) {
                const listContainer = document.createElement('ul');
                for (const feature of features) {
                    const listItem = document.createElement('li');
                    const itemLink = document.createElement('a');
                    const taxonomy = esgTaxonomies.find(taxonomy => taxonomy.name === feature.properties.name);

                    itemLink.href = taxonomy.link; // Use the link from the taxonomy data
                    itemLink.target = '_blank';
                    itemLink.textContent = taxonomy.country; // Display the country

                    listItem.appendChild(itemLink);
                    listContainer.appendChild(listItem);
                }
                listingEl.appendChild(listContainer);
            }
        }

        function convertUrlsToLinks(text) {
            const urlRegex = /(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
            return text.replace(urlRegex, function (url) {
                return '<a href="' + url + '" target="_blank">' + url + '</a>';
            });
        }

        document.getElementById('filter-dropdown').addEventListener('change', function () {
            const selectedCategory = this.value;
            const resultsContainer = document.getElementById('results-container');
            resultsContainer.innerHTML = ''; // Clear previous results

            esgTaxonomies.forEach(taxonomy => {
                if (taxonomy[selectedCategory]) {
                    const resultItem = document.createElement('div');
                    resultItem.classList.add('result-item');

                    const countryNameSpan = document.createElement('span');
                    countryNameSpan.classList.add('country-name');
                    countryNameSpan.textContent = taxonomy.country + ':';

                    // Determine if the content starts with 'http://' or 'https://'
                    const detailElement = document.createElement('div');
                    detailElement.classList.add('country-details');

                    // Use innerHTML to parse HTML string and convert URLs to links
                    detailElement.innerHTML = convertUrlsToLinks(taxonomy[selectedCategory]);

                    // Append the new elements to the resultItem, then to the resultsContainer
                    resultItem.appendChild(countryNameSpan);
                    resultItem.appendChild(detailElement);
                    resultsContainer.appendChild(resultItem);
                }
            });
        });

        const dragHandle = document.getElementById('drag-handle');
        const sidebar = document.getElementById('sidebar');

        let isDragging = false;

        // ... (rest of your existing script before the drag functionality)

        // Function to handle the dragging for both touch and mouse events
        function handleDrag(event) {
            // Determine the type of event
            const xPosition = event.type.includes('touch') ? event.touches[0].clientX : event.clientX;

            // Update the layout based on the event's X position
            updateLayout(xPosition);
        }

        // Add this function to update sidebar and map layout
        function updateLayout(sidebarWidth) {
            const sidebar = document.getElementById('sidebar');
            const mapContainer = document.getElementById('map');

            // Update sidebar width
            sidebar.style.width = `${sidebarWidth}px`;

            // Update drag handle position
            const dragHandle = document.getElementById('drag-handle');
            dragHandle.style.left = `${sidebarWidth}px`;

            // Update map container left margin
            mapContainer.style.left = `${sidebarWidth}px`;

            // Ensure the map adjusts to the new layout
            map.resize(); // Adjust the map size
        }

        // Touch event listeners START
        document.getElementById('drag-handle').addEventListener('touchstart', function (event) {
            isDragging = true;
            // Prevent the default touch behavior like scrolling
            event.preventDefault();
        }, { passive: false });

        document.addEventListener('touchmove', function (event) {
            if (isDragging) {
                handleDrag(event); // Call the handle drag function
                event.preventDefault(); // Prevent scrolling during drag
            }
        }, { passive: false });

        document.addEventListener('touchend', function () {
            isDragging = false;
        });
        // Touch event listeners END


        dragHandle.addEventListener('mousedown', function (e) {
            // Start dragging
            isDragging = true;
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
            e.preventDefault(); // Prevent text selection during drag
        });

        function onMouseUp() {
            // Stop dragging
            isDragging = false;
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
        }

        function updateLayout(xPosition) {
            const sidebarWidth = xPosition;
            const mapContainer = document.getElementById('map');

            // Ensure the sidebar width does not exceed the window boundaries
            const maxSidebarWidth = window.innerWidth - 50; // Keep some space for the map view
            const newSidebarWidth = Math.min(window.innerWidth - 50, Math.max(xPosition, 50)); // Adjust this to your minimum and maximum sidebar width

            sidebar.style.width = `${newSidebarWidth}px`;
            dragHandle.style.left = `${newSidebarWidth}px`;
            mapContainer.style.left = `${newSidebarWidth}px`;

            // Ensure the map adjusts to the new layout
            map.resize(); // Adjust the map size
        }


        function onMouseMove(e) {
            if (!isDragging) return;
            updateLayout(e.clientX);

            const sidebarWidth = e.clientX; // Get the new width based on the cursor position
            const maxWidth = window.innerWidth; // Get the total width of the window

            // Calculate the new width for the map container
            const mapWidth = maxWidth - sidebarWidth;

            // Update sidebar width
            sidebar.style.width = `${sidebarWidth}px`;

            // Update map container width
            const mapContainer = document.getElementById('map');
            mapContainer.style.width = `${mapWidth}px`;

            // Adjust the map view to the new container size
            map.resize();
        }

        function makePopupDraggable(popupElement) {
            const popupResizeHandle = document.createElement('div');
            popupResizeHandle.className = 'popup-resize-handle';
            popupElement.appendChild(popupResizeHandle);

            let isResizingPopup = false;
            let startX, startY, startWidth, startHeight;

            const startResizingPopup = (e) => {
                isResizingPopup = true;
                startX = e.clientX;
                startY = e.clientY;
                startWidth = parseInt(document.defaultView.getComputedStyle(popupElement).width, 10);
                startHeight = parseInt(document.defaultView.getComputedStyle(popupElement).height, 10);
                e.preventDefault(); // Prevent default dragging behavior
            };

            const resizePopup = (e) => {
                if (!isResizingPopup) return;

                let width = startWidth + e.clientX - startX;
                let height = startHeight + e.clientY - startY;

                // Set minimum size constraints
                width = Math.max(width, 1000); // Adjust minimum width as needed
                height = Math.max(height, 400);

                // Update the size of the popup
                popupElement.style.width = `${width}px`;
                popupElement.style.height = `${height}px`;
            };

            const stopResizingPopup = () => {
                isResizingPopup = true;
            };

            popupResizeHandle.addEventListener('mousedown', startResizingPopup);
            document.addEventListener('mousemove', resizePopup);
            document.addEventListener('mouseup', stopResizingPopup);
        }

        function normalize(string) {
            return string.trim().toLowerCase();
        }
        function featureToGeoJSON(taxonomy) {
            return {
                'type': 'Feature',
                'properties': {
                    'name': taxonomy.name,
                    'link': taxonomy.link
                },
                'geometry': {
                    'type': 'Point',
                    'coordinates': [taxonomy.longitude, taxonomy.latitude]
                }
            };
        }

        // Function to escape special characters for regex
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // Function to highlight search terms in text
        function highlightText(text, term) {
            if (!term) return text; // No term to highlight
            const escapedTerm = escapeRegExp(term);
            const regex = new RegExp(`(${escapedTerm})`, 'gi');
            return text.replace(regex, `<mark class="highlight">$1</mark>`);
        }

        function filterPopupContent(searchValue, popupContent) {
            // Apply highlighting to all text elements within the popup content, including collapsible sections
            const textElements = popupContent.querySelectorAll('.popup-text, .collapsible-content');

            textElements.forEach(element => {
                const text = element.textContent || element.innerText;
                // If a search term is provided, highlight it; otherwise, reset to the original text
                element.innerHTML = searchValue ? highlightText(text, searchValue) : text;
            });
        }

        document.addEventListener('input', function (event) {
            if (event.target.type === 'text') {
                filterPopupContent(event.target);
            }
        });

        function PopupContent(taxonomy) {
            const popupContent = document.createElement('div');
            // Generate popup innerHTML using taxonomy data
            // popupContent.innerHTML = ...

            // Return the fully constructed popup content element
            return popupContent;
        }

        // Centralized function to toggle display of collapsible content
        function toggleCollapsibleContent(content, show) {
            content.style.display = show ? 'block' : 'none';
            // Update arrow symbol if you have an arrow indicator in your design
        }
        
        const esgTaxonomies = [
             {
                latitude: -90,
                name: 'Name of the taxonomy document or plan',
                yearissued: 'Year in which the taxonomy was issued',
                developer: 'Organization(s) responsible for drafting or publishing the taxonomy',
                mandatedinlaworvoluntary: 'Whether a taxonomy is mandatory for firms',
                Purpose: 'Green: A taxonomy is considered green if it considers whether or not activities or firms are environmentally friendly and/or work toward lowering greenhouse gas emissions.<br><br>Transition: A taxonomy is considered to be transition-oriented if includes the opportunity for sustainability standards to become stricter over the course of an activity&apos;s lifetime.<br><br>Ineligible: This indicates whether or not a taxonomy lists specific activities that are precluded from a sustainable classification.',
                objective: 'Policy outcomes toward which progress would qualify an activity as sustainable (e.g. climate change mitigation, biodiversity preservation, etc.)',
                linkpolicyobjectives: 'Whether reference is made in the taxonomy to the included criteria',
                approachtoeligibility: 'The process by which an activity or firm is classified as eligible under the taxonomy.',
                sectorscovered: 'Sectors for which the taxonomy provides technical screening criteria and/or classified lists of specific activities.',
                Socialobjectivessafeguards: 'Social considerations beyond climatic and environmental considerations that are determinative in the taxonomy&apos;s classification system.',
                DonosignificantharmDNHS: '"Do no significant harm" is the principle that in order for an activity to be considered sustainable, it must not significantly harm any stated sustainability goal.',
                Intendedtobeinteroperable: 'Whether or not the taxonomy is intended to be interoperable with other taxonomies',
                MemberofIPFS: 'Whether the authoring country is a member of the International Platform for Sustainable Finance',
                link: 'Link to the taxonomy',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Whether a taxonomy prioritizes biodiversity protections',
                country: 'Description'
            },
            {
                latitude: -1.3462268,
                longitude: 107.20996,
                name: 'ASEAN Taxonomy for Sustainable Finance',
                yearissued: '2021',
                developer: 'ASEAN Taxonomy Board',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes <br><br> The taxonomy’s guided questioning on its environmental objectives is designed to determine whether or not an activity is green. <br><br> Transition: Yes <br> <br>The taxonomy considers the ability of activities to become more compliant with environmental objectives over a period of five years.<br><br> Ineligible: No',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Protection of Healthy Ecosystems and Biodiversity; Resource Resilience and the Transition to a Circular Economy ',
                linkpolicyobjectives: 'Paris Agreement: Yes <br> <br> Regional Framework: - <br> <br> National Strategies: -',
                approachtoeligibility: 'A principle-based approach is used to classify activities in a three-tiered system as either being “Green”, “Amber”, or “Red”. This process uses guided questioning to determine an activity’s level of contribution to the taxonomy’s environmental objectives and its compliance with the taxonomy’s essential criteria. Essential criteria include Do No Significant Harm, Remedial Measures to Transition, and the Social Aspects described under “Social Objectives/Safeguards”.<br><br>Activities in certain "Focus Sectors” and “Enabling Sectors” a more robust system of classification referred to as “Plus Standard” where activities can be labelled as either “Green”, “Amber Tier 2”, “Amber Tier 3”, or “Red”. The “Plus Standard” process also uses guided questioning to determine an activity’s contribution to the taxonomy’s environmental objectives and its compliance with essential criteria.<br><br>Classification of activities’ contributions to certain environmental objectives for certain sectors are determined by quantitative thresholds.',
                sectorscovered: 'The taxonomy considers six “focus sectors” and three “enabling sectors” for stricter scrutiny under its “Standard Plus” process.  The six focus sectors are Agriculture, Forestry, and Fishing; Electricity, Gas, Steam, and Air Conditioning Supply; Manufacturing; Transportation & Storage; Water Supply, Sewerage, and Waste Management; Construction & Real Estate. The three enabling sectors include Information & Communication; Professional, Scientific, and Technical; Carbon Capture, Storage, and Utilization.',
                Socialobjectivessafeguards: 'Yes<br><br>Promotion and Protection of Human Rights; Prevention of Forced Labour and Protection of Children’s Rights; Impact on People living Close to Investments<br><br>An Activity intended to achieve an EO shall not inflict harm on Social Aspects. Activities should be assessed for appropriate avoidance and mitigation of potentially exploitative practices.',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No <br><br> "Alignment of the ASEAN Taxonomy with international standards is not straightforward and investors understand the benefit of the ASEAN Taxonomy being tailored to individual AMS."',
                MemberofIPFS: 'No',
                link: 'https://www.theacmf.org/images/downloads/pdf/ASEAN-Taxonomy-Version-3.pdf',
                Additionalguidance: '',
                otherusefuldocuments: 'https://www.iflr.com/article/2a647e1ubbp4gena2y9s0/primer-asean-taxonomy-for-sustainable-finance-version-1#:~:text=The%20ASEAN%20taxonomy%20is%20not,approach%20or%20be%20developing%20one.',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'ASEAN'
            },           
            {
                latitude: 23.685,
                longitude: 90.3563,
                name: 'Sustainable Finance Policy for Banks and Financial Institutions',
                link: 'https://www.bb.org.bd/mediaroom/circulars/gbcrd/dec312020sfd05.pdf',
                yearissued: '2020',
                mandatedinlaworvoluntary: 'Voluntary',
                developer: 'Bangladesh Bank Sustainable Finance Department',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Sustainable protection of water and marine resources ; Transition to a circular economy, waste prevention and recycling; Pollution prevention and control; Protection and restoration of biodiversity and healthy ecosystems ',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                sectorscovered: 'Alternative Energy; Liquid Waste Management; Solid Waste Management; Recycling & Manufacturing of Recyclable Goods; Environmentally-Friendly Brick Production; Green/Environment Friendly Establishments; Green Agriculture; Green CMSME; Green SRF',
                approachtoeligibility: 'While the taxonomy includes objectives and references minimum social safeguards, they are not included in the screening process. Rather there is an included eligibility list of qualifying products and industries, and there is an exclusion list that is referenced but not provided. Activities that are not explicitly excluded then undergo the ESDD risk assessment which considers its general, environmental health and safety, and social risks.',
                basedonanothertaxonomy: 'No',
                Intendedtobeinteroperable: 'No',
                Purpose: 'Green: Yes<br><Br>Environmental risks are considered as part of the ESDD risk assessment process.<br><Br>Transition: No<br><Br>Ineligible: Yes<br><Br>An ineligibility list is referenced.',
                DonosignificantharmDNHS: 'Yes',
                Socialobjectivessafeguards: 'Yes<br><Br>Social safeguards are considered as part of the ESDD risk assessment, but it is unclear how this risk assessment is used in establishing eligibility.',
                Additionalguidance: 'https://www.bb.org.bd/mediaroom/circulars/gbcrd/annex2_esrm-esdd_risk_assessment_tool.xlsx#:~:text=This%20E%26S%20risk%20assessment%20tool,checklists%3B%20and%20glossary%20of%20terms.&text=The%20user%20guide%20provides%20guidance,auto%20generating%20risk%20assessment%20tool.',
                otherusefuldocuments: '-',
                MemberofIPFS: 'No',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Bangladesh'
            },
            {
                latitude: -15.793889,
                longitude: -47.882778,
                name: 'Brazil&apos;s Sovereign Sustainable Bond Framework',
                yearissued: '2023',
                developer: 'Sovereign Sustainable Finance Committee',
                mandatedinlaworvoluntary: 'Mandatory',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>Ineligible: Yes',
                objective: 'Specific objectives are not clearly stated, but separate guidelines are available for green, social, and sustainability bonds. ',
                linkpolicyobjectives: ,
                approachtoeligibility: 'The framework allows for three types of bonds: green, social, and sustainability. There exists for each seperate list of activities that proceeds can be spent on and comcomitant ineligible activities lists.',
                sectorscovered: 'Environmental: Pollution Prevention and Control; Renewable Energy; Energy Efficiency; Clean Transport; Sustainable Management of Living and Natural Resources and Land Use; Terrestrial and Aquatic Biodiversity; Sustainable Management of Water and Effluents; Adaptation to Climate Change; Circular Economy Adapted Products, Production Technologies and Processes<br>Social: Social-Economic Development and Empowerment; Food Security and Sustainable Food Systems; Employment Generations; Access to Affordable Housing; Access to Basic Infrastructure; ',
                Socialobjectivessafeguards: 'Yes<br><br>Minimum Social Safeguards include the IFC Performance Standards.',
                DonosignificantharmDNHS: 'Yes/NA<br><br>DNSH is included as part of the essential criteria. However, only a single objective has been defined, so it is unclear how DNSH would be applied.',
                Intendedtobeinteroperable: 'No<br><br>However, part of the taxonomy relies on the ICMA Sustainability Bond Guidelines.',
                MemberofIPFS: 'No',
                link: 'https://sisweb.tesouro.gov.br/apex/f?p=2501:9::::9:P9_ID_PUBLICACAO_ANEXO:21043 ',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>See Sectors',
                country: 'Brazil'
            },
            {
                latitude: 39.916668,
                longitude: 116.383331,
                name: 'Green Bond Endorsed-Projects Catalogue',
                link: 'http://www.pbc.gov.cn/goutongjiaoliu/113456/113469/4342400/2021091617180089879.pdf',
                yearissued: '2021',
                mandatedinlaworvoluntary: 'Mandatory',
                developer: 'People&apos;s Bank of China; the National Development and Reform Commission; China Securities Regulatory Commission',
                objective: 'None',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                sectorscovered: 'Energy Saving and Environmental Protection; Clean Production Industry; Clean Energy Industry; Ecology and Environment-related sector; Sustainable Upgrade of Infrastructure; Green Services; ',
                approachtoeligibility: 'This catalogue is a positive list of activities for which green bonds can be issued by financial entities in China.',
                basedonanothertaxonomy: 'No',
                Intendedtobeinteroperable: 'No',
                Purpose: '-',
                DonosignificantharmDNHS: 'No',
                Socialobjectivessafeguards: 'No',
                Additionalguidance: '-',
                otherusefuldocuments: '-',
                MemberofIPFS: 'Yes',
                Biodiversity: 'Yes<br><br>Protecting biodiversity is included in the descriptions for 6 different eligibile activities including the management and protection of marine ranching; pest prevention and control; protection of animal and plant resources; protection and restoration of national and ecological security barriers; comprehensive management of sea areas, coastal zones, and islands; and carbon sequestration forest, tree and grass planting and seedlings, and ornamental flowers.',
                country: 'China, PR'
            },
            {
                latitude: 39.0004182794694,
                longitude: 117.50083219801803,
                name: 'Green and Low-carbon Transition Industry Guidance Catalogue',
                yearissued: '2024',
                developer: 'National Development and Reform Commission; Ministry of Industry and Information Technology; Ministry of Natural Resources; Ministry of Ecology and Environment; Ministry of Housing and Urban-Rural Development; Ministry of Transport; People&apos;s Bank of China; Financial Regulatory Commission; China Securities Regulatory Commission; National Energy Administration',
                mandatedinlaworvoluntary: 'Mandatory',
                Purpose: '-',
                objective: 'None',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'This catalogue is a positive list of activities for which green bonds can be issued by financial entities in China.',
                sectorscovered: 'Energy Saving and Carbon-reduction Industry; Environmental Protection Industry; Resource Recycling Indutsry; Green and Low-carbon Energy Transformation; Ecological Protection, Restoration, and Utilization; Green Infrastructure Upgrade; Green Services',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'Yes',
                link: 'https://www.gov.cn/zhengce/zhengceku/202403/P020240301523841564369.pdf',
                Additionalguidance: '',
                otherusefuldocuments: 'https://www.gov.cn/zhengce/zhengceku/202403/content_6935418.htm',
                Biodiversity: 'Yes<br><br>Protecting biodiversity is included in the descriptions for 6 different eligibile activities including the management and protection of marine ranching; pest prevention and control; protection of animal and plant resources; protection and restoration of national and ecological security barriers; comprehensive management of sea areas, coastal zones, and islands; and carbon sequestration forest, tree and grass planting and seedlings, and ornamental flowers.',
                country: 'China, PR'
            },
            {
                latitude: 51.510289,
                longitude: -0.093259,
                name: 'Climate Bonds Taxonomy',
                yearissued: '2021',
                developer: 'Climate Bonds Initiative',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: Yes',
                objective: 'Climate Change Mitigation (implied)',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: No<br><br>National Strategies: No',
                approachtoeligibility: 'This taxonomy is a list of economic activities. They can be classified as automatically compatiable, compatiable if compliant with screening indicator, or not compatiable. Most of the activities that require further screening have technical screening criteria which is already developed.',
                sectorscovered: 'Energy; Transport; Water; Buildings; Land Use & Marine Resources; Industry; Waste and Pollution Control; Information & Communications Technology',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'No',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://www.climatebonds.net/files/files/Taxonomy/CBI_Taxonomy_Tables-08A%20%281%29.pdf',
                Additionalguidance: 'https://www.climatebonds.net/standard/taxonomy',
                otherusefuldocuments: '',
                Biodiversity: 'No',
                country: 'Climate Bonds Initiative'
            },
            {
                latitude: 4.624335,
                longitude: -74.063644,
                name: 'Taxonomía Verde de Colombia',
                yearissued: '2022',
                developer: 'Government of Colombia: The Colombian Superintendency of Finance (SFC), the Ministry of finance (MHCP), The National Planning Department (DNP), the Department of Statistics of Colombia (DANE) and the Ministry of Environment and Sustainable Development (MADS) oversaw the taxonomy development process.',
                mandatedinlaworvoluntary: 'The taxonomy is voluntary and has no legal status. <br> <br> However, there are regulations in place to support its implementation, although these do not impose specific disclosure obligations.  The SFC has issued external circulars that encourage the use of the taxonomy in labelling of green bonds, ESG portfolios and voluntary labelling of pension funds.',
                Purpose: 'Green: Yes <br> <br> Transition: No <br> <br> Ineligible: No',
                objective: 'The main objective is to make a substantial contribution to climate change mitigation, followed by climate change adaptation, ecosystem and biodiversity conservation and water management, soil management,circular economy and pollution prevention and control.',
                linkpolicyobjectives: 'Paris Agreement: Yes <br> <br> Regional Framework: - <br> <br> National Strategies: -',
                approachtoeligibility: 'The Colombian taxonomy uses a pass-list and criteria approach depending on the sector. A list of eligible activities is included for each sector which is typically dependent on its components meeting certain thresholds and criteria.',
                sectorscovered: 'The Colombian taxonomy covers 10 sectors, 47 activities/assets and 11 further activities that derive from three land use sectors which have environmental objectives other than climate change mitigation. 7  sectors for improvement are covered including, Construction, Energy, Transport, Water supply and treatment, Waste, Management and emissions capture, Manufacturing, Information and communication. An additional 3 economic sectors are covered including Livestock, Agriculture, and Forestry.',
                Socialobjectivessafeguards: 'The taxonomy includes six social objectives that must not be violated in order for an activity to be eligible. These relate to 1) the evaluation and managements of environmental and social risks and impacts, 2) working and labor conditions, 3) community health and safety, 4) land acquisition and forced resettlement, 5) indigenous peoples, and 6) cultural heritage',
                DonosignificantharmDNHS: 'Yes <br> <br> Activities must comply with the principle of Do No Significant Harm to any of the environmental or social objectives.',
                Intendedtobeinteroperable: 'Yes',
                MemberofIPFS: 'No',
                link: 'https://www.taxonomiaverde.gov.co/webcenter/portal/TaxonomaVerde',
                Additionalguidance: 'The only official regulatory framework for the adoption of the Colombian Green Taxonomy is the SFC’s External Circular 005 of 20223 which provides instructions for adoption. It allows entities supervised by the SFC the option of using the taxonomy for various purposes, including identifying financing and investment opportunities for supporting the transition to a sustainable economy, measuring portfolio alignment with green assets and activities, structuring green products and solutions, and enhancing disclosure and transparency practices. The external circular includes three annexes specifying: the use of the taxonomy for investment portfolios, green bond issuers, and voluntary pension funds. <br> <br> https://www.cerlatam.com/normatividad/superfinanciera-circular-externa-005-de-2022/#:~:text=La%20SuperFinanciera%20',
                otherusefuldocuments: '• CE 28, 2020 - Green Bonds <br> • CE 08, 2021 - ESG Integration for Voluntary Pension Funds <br> • CE 31, 2021 – ESG and Climate Disclosure Regulation for Issuers <br> • PCE 2022 - Sustainability Linked Bonds <br> <br> The following report provides a helpful comparison between the EU and Colombian Taxonomy provided by the Climate Bond Institute: <br> <br> https://www.climatebonds.net/resources/reports/comparison-study-between-colombian-and-eu-taxonomies',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Colombia'
            },
            {
                latitude: 50.85045,
                longitude: 4.34878,
                name: 'European Union Taxonomy for Sustainable Activities',
                link: 'https://ec.europa.eu/sustainable-finance-taxonomy/taxonomy-compass/the-compass',
                yearissued: '2020',
                mandatedinlaworvoluntary: 'Mandatory. <br> <br> The taxonomy includes mandatory disclosure obligations on some companies and investors, requiring them to disclose their share of Taxonomy-aligned activities. Nevertheless, the EU Taxonomy is not a mandatory list of economic activities for investors to invest in. Nor does it set mandatory requirements on environmental performance for companies or for financial products. Investors are free to choose what to invest in. However, it is expected that over time, the EU Taxonomy will be an enabler of change and encourage a transition towards sustainability.',
                developer: 'The Technical Expert Group on Sustainable Finance (TEG), Member States Expert Group on Sustainable Finance,  Platform on Sustainable Finance <br> <br> The TEG commenced its work in July 2018. Its 35 members from civil society, academia, business and the finance sector, as well as additional members and observers from EU and international public bodies work both through formal plenaries and subgroup meetings for each workstream. To allow it to conclude its technical work and retain the expertise before the future Platform on sustainable finance is set up, the mandate of the TEG was extended until 30 September 2020 following which it was replaced by the Platform on Sustainable Finance. <br> <br> The European Commission adopted its “Action Plan on Financing Sustainable Growth” on 8 March 2018 which proposed concrete actions that will help achieve the Sustainable Development Goals and the objectives set in the Paris Agreement on Climate Change drawing on the recommendations of the High-Level Expert Group on Sustainable Finance. In its Action Plan, the European Commission has called on other players, such as EU Member States, to support implementing sustainable finance actions and promote the transformation in their territories. For this purpose, the European Commission is creating a dedicated EU Member States expert group on sustainable finance.',
                objective: 'The Taxonomy outlines six key environmental objectives: <br> Addressing climate change by mitigating its impact. <br> Adapting to the challenges posed by climate change. <br> Promoting sustainable management and protection of water and marine resources. <br> Encouraging the shift towards a circular economy. <br> Preventing and controlling pollution. <br> Safeguarding and rejuvenating biodiversity and ecosystems.',
                linkpolicyobjectives: 'Paris Agreement: Yes <br> <br> Regional Frameworks: Yes, (in principal) <br> <br> National Strategies: -',
                approachtoeligibility: 'N/A',
                sectorscovered: 'Activities: 94 activities or assets. <br> <br> Sectors: Construction, infrastructure and real estate, Consumer products, Credit institutions, Health, biotechnology and chemicals, Insurance undertakings, Manufacturing, Mining and quarrying, Mobility - vehicle manufacturing and transport, Oil and gas, Power and Utilities.',
                Intendedtobeinteroperable: 'Yes',
                Purpose: 'Green: Yes <br> <br> Transition: No <br> <br> Ineligible: No',
                DonosignificantharmDNHS: 'Yes <br> <br> For an activity pursuing one or more of the six objectives to qualify as sustainable it cannot cause significant harm to any of the other Taxonomy objectives. For each activity, the TSC lay out thresholds to define compliance with do no significant harm.',
                Socialobjectivessafeguards: 'No',
                Additionalguidance: 'For further guidance on  TSC Notices the Commission sets out draft responses to FAQs on TSCs for the environmental objectives of climate change mitigation and climate change adaptation, contained in the Climate Delegated Act <br> <br> Interpretation and Guidance provided: <br> <br> On 20 October 2023, the following Commission notices regarding interpretation and implementation of certain legal provisions under the Taxonomy Regulation were published in the Official Journal (OJ): <br> The Climate Delegated Act Notice sets out responses to FAQs “on the interpretation and implementation of certain legal provisions of the EU Taxonomy Climate Delegated Act establishing technical screening criteria for economic activities that contribute substantially to climate change mitigation or climate change adaptation and do no significant harm to other environmental objective”. <br> <br>Here the link:<br> https://gbr01.safelinks.protection.outlook.com/?url=https%3A%2F%2Feur-lex.europa.eu%2Flegal-content%2FEN%2FTXT%2FPDF%2F%3Furi%3DOJ%3AC_202300267&data=05%7C01%7CMBDHub%40simmons-simmons.com%7C2089c3da5b2e45d2591b08dbd3ac36d5%7C9c0035ef4799443f8b14c5d60303e8cd%7C0%7C0%7C638336508820094210%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=v602G0uFwizbE3tUorBVWCyLhRrE8LirvWl09aZNo6U%3D&reserved=0 <br> <br> The Disclosures Delegated Act Notice sets out responses to FAQs “on the interpretation and implementation of certain legal provisions of the Disclosures Delegated Act under Article 8 of EU Taxonomy Regulation on the reporting of Taxonomy-eligible and Taxonomy-aligned economic activities and assets”. <br> <br> On 15 June 2023, the Commission published a Notice (the Notice) as part of its ESG package) that deals with “the interpretation and implementation of certain legal provisions of the EU Taxonomy Regulation and links to the Sustainable Finance Disclosure Regulation.” The Notice considers the following questions and issues: <br> <br> • Can Taxonomy-aligned investments qualify as ‘sustainable investment’ under the SFDR? <br> <br> • What is the role of minimum safeguards in the Taxonomy Regulation? <br> <br> • How are minimum safeguards defined under Article 18 of the Taxonomy Regulation? <br> <br> • Key expectations for undertakings under Article 18 of the Taxonomy Regulation. <br> <br> Here a link to the note:<br> https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:52023XC0616 <br> <br> In addition, there is further guidance provided in the following: <br> <br> • A Commission staff document, FAQ: What is the EU Taxonomy Article 8 delegated act and how will it work in practice?; <br> <br> • A Commission staff document, FAQs: How should financial and non-financial undertakings report Taxonomy-eligible economic activities and assets in accordance with the Disclosures Delegated Act (updated January 2022); and <br> <br> • A Commission Notice (published 6 October 2022) on the interpretation of certain legal provisions of the Disclosures Delegated Act on the reporting of Taxonomy-eligible economic activities. <br> <br> Finally, there is also the following the  Disclosures Notice  with FAQ on the Article 8 Disclosure which are set out in the Disclosures Delegated Act – it is likely that much of this disclosure notice will be impacted by the review of SFDR (currently underway) so this notice may decline in its relevance. Here the link: <br> https://ec.europa.eu/finance/docs/law/221219-draft-commission-notice-disclosures-delegated-act-article-8.pdf',
                otherusefuldocuments: 'https://ec.europa.eu/sustainable-finance-taxonomy/<br> <br> The EU taxonomy navigator offers four tools that will help you navigate the EU taxonomy: <br> <br> 1. EU taxonomy compass: a visual representation of sectors, activities and criteria included in the EU Taxonomy delegated acts <br> <br> 2. EU taxonomy calculator: a step-by-step guide on reporting obligations <br> <br> 3. FAQs repository: an overview of questions and answers on the EU taxonomy and its delegated acts <br> <br> 4. EU taxonomy user guide: a guidance document on the Taxonomy for non-experts <br> <br> OTHER - Future work on improving the usability of the taxonomy: A report by the Platform on Sustainable Finance recommendations on data and usability of the EU taxonomy (europa.eu) <br> <br> https://finance.ec.europa.eu/system/files/2022-10/221011-sustainable-finance-platform-finance-report-usability_en_1.pdf',
                MemberofIPFS: 'Yes <br> <br> The European Union was among the founding members.  They are comparing efforts with the CBI with a view to enhance interoperability, convergence is considered too challenging at present.',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'EU'
            },
            {
                latitude: 41.69870546438352,
                longitude: 44.80638475907985,
                name: 'Sustainable Finance Taxonomy for Georgia',
                yearissued: '2022',
                developer: 'Georgia Sustainable Finance Working Group',
                mandatedinlaworvoluntary: 'Mandatory<br><br>The taxonomy is mandatory for green loans to commerical banks.',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                objective: 'Climate Change Adaptation; Climate Change Mitigation; Biodiversity Consevation; Natural Resource Consevation; Pollution Prevention and Control; Sustainable Use and Protection of Water and Marine Resources; Transition to a Circular Economy; Waste Prevention and Recycling; Poverty Reduction; Food Security; Education; Healthcare; Financial Inclusion',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'This taxonomy includes a list of activities that are considered eligible. Some have specific technical screening criteria that must be met.',
                sectorscovered: 'Renewable Energy; Energy Efficiency; Waste Management; Sustainable Waste Management; Pollution Prevention & Control; Green Transport; Sustainable Agriculture, Farming, & Aquaculture; Biodiversity Conservation; Sustainable Building & Construction; Sustainable Production & Trade; Green Services; Affordable Basic Infrastructure; Healthcare and Related Social Services; Financing and Financial Services; Food Security; Education, Technology, Culture, Fitness',
                Socialobjectivessafeguards: 'Yes<br><br>Poverty Reduction, Food Security, Education, Healthcare, and Financial Inclusion are listed as social objectives. Minimum social safeguards are not included.',
                DonosignificantharmDNHS: 'No',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://www.sbfnetwork.org/wp-content/assets/policy-library/702_Georgia_sustainable_finance_taxonomy_2022.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Georgia'
            },
            {
                latitude: 22.285206,
                longitude: 114.159649,
                name: 'Hong Kong Taxonomy for Sustainable Finance',
                yearissued: '2024',
                developer: 'Hong Kong Monetary Authority',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                objective: 'Climate Change Mitigation',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: No<br><br>National Strategies: No',
                approachtoeligibility: 'This taxonomy contains a list of activities with specific screening criteria for each of them.',
                sectorscovered: 'Construction; Electricity & Gas Supply; Transportation, Storage, and Courier Services; Water Supply, Sewerage, Waste Management, and Remediation Activities',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'No',
                Intendedtobeinteroperable: 'Yes<br><br>It is intended to be interoperable with the EU Taxonomy and the Mainland China Taxonomy through the CGT.',
                MemberofIPFS: 'Yes',
                link: 'https://www.hkma.gov.hk/media/eng/doc/key-information/guidelines-and-circular/2024/20240503e1.pdf',
                Additionalguidance: 'https://www.hkma.gov.hk/media/eng/doc/key-information/guidelines-and-circular/2024/20240503e1a2.pdf<br><br>https://www.hkma.gov.hk/media/eng/doc/key-information/guidelines-and-circular/2024/20240503e1a1.pdf',
                otherusefuldocuments: '',
                Biodiversity: 'No',
                country: 'Hong Kong'
            },
            {
                latitude: -6.181469,
                longitude: 106.819814,
                name: 'Indonesia Taxonomy for Sustainable Finance',
                yearissued: '2024',
                developer: 'Department of Surveillance and Integrated Financial Services Sector Policy',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>There is consideration of Remedial Measures to Transition.<br><br>Ineligible: No',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Protection of Healthy Ecosystems and Biodiversity; Resource Resilience and the Transition to a Circular Economy',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Technical screening criteria is directly tied to NDC<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'Activities undergo technical screening criteria which may include sector-specific decision trees. This process classifies activities as being either "Green", "Transition", or "Unqualified".',
                sectorscovered: 'Energy; Waste; PPU; Agriculture; FOLU',
                Socialobjectivessafeguards: 'Yes<br><br>Social aspects including Protection and Respect for Human Rights, Employment, and Impact on people living close to Investments are included in the technical ',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'Yes',
                link: 'https://implementasur.com/wp-content/uploads/2024/05/Indonesia-Taxonomy-for-Sustainable-Finance.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Indonesia'
            },
            {
                latitude: 50.837307,
                longitude: 4.401025,
                name: 'Common Ground Taxonomy',
                yearissued: '2022',
                developer: 'IPSF Taxonomy Working Group',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: '',
                objective: 'Climate Change Mitigation',
                linkpolicyobjectives: '',
                approachtoeligibility: 'This taxonomy does not seek to establish eligibility, rather it contains a list of activities and seeks to identifies areas of overlap between China&apos;s and the EU&apos;s taxonomies.',
                sectorscovered: 'Agriculture, Forestry, and Fishing; Manufacturing; Electricity, Gas, Steam, and Air Conditioning Supply; Water Supply, Sewerage, Waste Management, and Remediation Activities; Construction; Transportation and Storage; Carbon and Hydrogen Storage',
                Socialobjectivessafeguards: '',
                DonosignificantharmDNHS: '',
                Intendedtobeinteroperable: 'Yes<br><br>The Common Ground Taxonomy is intended to be interoperable with both the EU&apos;s CGT and China&apos;s Green Industry Guiding Catalogue.',
                MemberofIPFS: 'Yes (self)',
                link: 'https://finance.ec.europa.eu/system/files/2022-06/220603-international-platform-sustainable-finance-common-ground-taxonomy-instruction-report_en.pdf',
                Additionalguidance: 'https://finance.ec.europa.eu/document/download/85430b19-dbae-4aca-a203-0c6e93ce93aa_en?filename=220603-international-platform-sustainable-finance-common-ground-taxonomy-table-faq_en.pdf',
                otherusefuldocuments: '',
                Biodiversity: 'See eligibility',
                country: 'International Platform for Sustainable Finance'
            },
            {
                latitude: 35.652832,
                longitude: 139.839478,
                name: 'Green Bond and Sustainability-Linked Bond Guidelines',
                yearissued: '2022',
                developer: 'Ministry of the Environment',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: Yes',
                objective: 'Objectives are not directly stated, but examples of potentially eligible activities are sorted by what could be considered their environmental objective. See Sectors for these groups.',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: No',
                approachtoeligibility: 'These guidelines do not define eligibility and are not mandatory. They instead provide definitions for what could be considered a green or sustainability-linked bond in the future. They also outline the principles according to which impact should be assessed and reporting standards should be devised.',
                sectorscovered: 'Renewable Energy; Energy Efficiency; Pollution Prevention and Control; Sustainable Management of Living Natural Resources and Land Use; Biodiversity Conservation; Clean Transportation; Sustainable Water Management; Climate Change Adaptation; Production Technologies and Processes and Environmentally Friendly Products for the Circular Economy; Green Buildings',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'No',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'Yes',
                link: 'https://www.env.go.jp/content/000128193.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>"Biodiversity conservation" is included as a type of activity that could be considered a green or sustainability-linked bond.',
                country: 'Japan'
            },
            {
                latitude: 51.1799,
                longitude: 71.4467,
                name: 'Concept on introduction and development of green finance instruments and principles',
                link: 'https://www.greenfinanceplatform.org/sites/default/files/2022-05/Green%20Taxonomy%20Kazakhstan.pdf',
                yearissued: '2021',
                mandatedinlaworvoluntary: 'Mandatory',
                developer: 'Government of the Republic of Kazakhstan',
                objective: 'None',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                sectorscovered: 'Renewable Energy; Energy Efficiency; Green Buildings; Pollution Prevention & Control; Sustainable Water and Waste Use;  Sustainable Agriculture, Land Use, Forestry, Biodiversity Conservation & Eco Tourism; Clean Transport',
                approachtoeligibility: 'This catalogue is a positive list of activities for which green bonds can be issued by financial entities in Kazakhstan.',
                basedonanothertaxonomy: 'No',
                Intendedtobeinteroperable: 'No',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                DonosignificantharmDNHS: 'No',
                Socialobjectivessafeguards: 'No',
                Additionalguidance: '-',
                otherusefuldocuments: '-',
                MemberofIPFS: '-',
                Biodiversity: 'Yes<br><br>See Sectors',
                country: 'Kazakhstan'
            },
            {
                latitude: 36.505666,
                longitude: 127.263151,
                name: 'K-Taxonomy Guidelines',
                yearissued: '2021',
                developer: 'Ministry of Environment',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: Yes',
                objective: 'Greenhouse Gas Reduction; Climate Change Adaptation; Sustainable Conservation of Water; Transition to a Circular Economy; Pollution Prevention and Management; Biodiversity Conservation',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: No<br><br>National Strategies: No',
                approachtoeligibility: 'This taxonomy has a four-part evaluation system. The first is judging whether or not an activity is appropriately classified in the taxonomy. The second is evaluating whether the activity meets the technical screening criteria. Finally, the activity is judged against DNSH and minimum social safeguards.',
                sectorscovered: 'Green Sector: Green Industry; Green Research and Development<br><br>Transition Sector: Greenhouse Gas Reduction at SMEs; LNG and Mixed Gas; Nuclear Energy; Blue Hydrogen; Eco-Friendly Ship Construction; Eco-Friendly Transportation',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://gmi.go.kr/js/pdfjs/web/viewer.html?file=/upload/format/K-Taxonomy%20Guidelines.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Republic of Korea'
            },
            {
                latitude: 2.49710151083662,
                longitude: 102.17501535701825,
                name: 'Climate Change and Principle-based Taxonomy',
                link: 'https://www.bnm.gov.my/documents/20124/938039/Climate+Change+and+Principle-based+Taxonomy.pdf',
                yearissued: '2021',
                mostrecentupdate: 'The most recent updates sets out five Guiding Principles (GPs) intended to help financial institutions (FIs) assess and categorize economic activities according to the extent to which they meet climate objectives and promote the transition to a low-carbon economy.',
                mandatedinlaworvoluntary: 'Vountary',
                developer: 'Bank Negara Malaysia',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; see Do No Signifcant Harm',
                linkpolicyobjectives: '"Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: No"',
                sectorscovered: 'Screening criteria are not provided for specific sectors. However, a list of activities that generally meet the criteria of working toward climate change adaptation/mitigation is included by sector. Sectors provided for climate change mitigation include Energy Efficiency; Transportation; Green Technology/Manufacturing; Renewable Energy; Waste Management; Agriculture, Forests, and Land Conservation. Sectors provided for climate change adaptation include Forestry, Fisheries, Agriculture, Water Resources, Construction, Coastal Areas, Health, Information and Communication, and Transportation.',
                approachtoeligibility: 'Economic activities are first evaluated to see if they contribute to climate change mitigation and/or adaptation. Then, activities are evaluated to determine if they do not do significant harm in areas involving pollution, biodiversity, or natural resource use. If either of the two preceding tests are not met, then remedial plans for transition must be presented that lay out how the activity will meet the criteria over a specific time period. Finally, activities have to be verified to be in compliance with national law.',
                basedonanothertaxonomy: 'No',
                Intendedtobeinteroperable: 'No',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>"Remedial measures to transition" are included in the taxonomy to account for activities that will become sustainable in the future.<br><br>Ineligible: No<br><br>The only activities referenced as being inelligible are those that are already wholly illegal.',
                DonosignificantharmDNHS: 'Yes<br><br>The taxonomy incorporates as one of its guiding principles "No significant harm to the environment". This is assessed in terms of an activity&apos;s impact on pollution, ecosystems and biodiversity, and efficient natural resource use.',
                Socialobjectivessafeguards: 'No<br><br>Social parameters are limited to not violating existing law.',
                Additionalguidance: '-',
                otherusefuldocuments: '-',
                MemberofIPFS: 'Yes',
                Biodiversity: 'No<br><br>Consideration of biodiversity is limited to the determination of eligibility for activities involving the Manufacture of liquid biofuel for use in transport with significantly reduced GHG emissions by using advanced technologies.',
                country: 'Malaysia'
            },
            {
                latitude: 3.1479885622642874,
                longitude: 101.64458113856581,
                name: 'Principle-based Sustainable and Responsible Investment Taxonomy for the Malaysian Capital Market',
                yearissued: '2022',
                developer: 'Securities Commission Malaysia',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>"Remedial measures to transition" are included in the taxonomy to account for activities that will become sustainable in the future.<br><br>Ineligible: No',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Protection of Healthy Ecosystems and Biodiversity; Promotion of Resource Resilience and Transition to Circular Economy',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: No',
                approachtoeligibility: 'The taxonomy uses a traffic light system which classifies activities as "Green", "Amber", or "Red". First, activities are evaluated to determine if they make signficant contributions toward achieving one of the environmental objectives. It is then determined whether the activity does significant harm to any other objective. Finally, it is determined whether remedial efforts are taken to mitigate the harm caused by the activity.',
                sectorscovered: 'None',
                Socialobjectivessafeguards: 'No<br><br>The social objectives of Enhanced Conduct Towards Workers, Consumers and End-Users, and Affected Communities and Wider Society is included in the taxonomy. Additionally, relevant questions for evaluation and examples of sector-specific activities that work toward social objectives are included. However, the contribution to social objectives or the lack thereof is not included in the ultimate classification scheme.',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'Yes',
                link: 'https://www.sc.com.my/api/documentms/download.ashx?id=a0ab5b0d-5d7d-4c66-8638-caec92c209c1#:~:text=In%20line%20with%20the%20recommendation,with%20environmental%2C%20social%20and%20sustainability',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>See Objectives',
                country: 'Malaysia'
            },
            {
                latitude: 19.323083077020716,
                longitude: -99.10755921688036,
                name: 'Sustainable Taxonomy of Mexico',
                yearissued: '2023',
                developer: 'Secretariat of the Treasury and Public Credit',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: Yes',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Sustainable Cities',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'This taxonomy evaluates economic activities by determining their contribution one of the objectives, evaluating it against technical screening criteria, and then passing  DNSH check. It includes a list of activities whic have been pre-evaluated, and declares whether they are automatically eligible, ineligible, or required to undergo further screening criteria.',
                sectorscovered: 'Agriculture, Animal Husbandry and Exploitation, Forestry Exploitation; Generation, Transmission, Distribution, and Marketing of Electrical Energy and Water Supply; Construction; Manufacturing; Transportation; Waste Management and Remediation Services',
                Socialobjectivessafeguards: 'Yes<br><br>Gender Equality is one of the main objectives with technical screening criteria.',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://www.gob.mx/cms/uploads/attachment/file/809773/Taxonom_a_Sostenible_de_M_xico_.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>Biodiversity is listed as an environmental objective only for the purpose of DNSH. Improving biodiversity does not qualify an activity to be considered sustainable.',
                country: 'Mexico'
            },
            {
                latitude: 47.921230,
                longitude: 106.918556,
                name: 'Mongolia Green Taxonomy',
                link: 'https://www.sbfnetwork.org/wp-content/assets/policy-library/1270_Mongolia_Green_Taxonomy_2019_MSFA.pdf',
                yearissued: '2019',
                mandatedinlaworvoluntary: 'Voluntary',
                developer: 'Financial Stability Commission of Mongolia',
                objective: '"Climate change mitigation, adaptation, pollution prevention, resource conservation, and livelihood improvement in the context of green finance"',
                linkpolicyobjectives: '-',
                sectorscovered: 'Renewable Energy; Energy Efficiency; Green Building; Low Pollution Energy, Pollution Prevention & Control; Sustainable Water and Waste Use; Sustainable Agriculture, Land Use, Forestry, Biodiversity Conservation & Eco Tourism; Clean Transport',
                approachtoeligibility: 'This catalogue is a positive list of activities for which green bonds can be issued by financial entities in Mongolia.',
                basedonanothertaxonomy: 'No',
                Intendedtobeinteroperable: 'No',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                Sectorclassification: 'Corporations, Financial Service providers, Investment Managers, Asset Owners (Other), Asset Owners (Insurance companies), Asset Owners (Corporate pension or equivalent plans), Asset Owners (non-corporate Pension Funds or equivalent), Voluntary, Taxonomy.',
                DonosignificantharmDNHS: 'No',
                Socialobjectivessafeguards: 'No',
                Additionalguidance: '-',
                otherusefuldocuments: '-',
                MemberofIPFS: '-',
                Biodiversity: 'Yes<br><br>See Sectors',
                country: 'Mongolia'
            },
            {
                latitude: -9.479151,
                longitude: 147.147820,
                name: 'Inclusive Green Finance Policy of Papua New Guinea',
                yearissued: '2023',
                developer: 'Bank of Papua New Guinea',
                mandatedinlaworvoluntary: 'Voluntary<br>To take force no earlier than 2025',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                objective: '',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'The taxonomy has a list of activities, some of which are listed as being directly eligible. Most are subject to technical screening criteria, none of which have been determined.',
                sectorscovered: '',
                Socialobjectivessafeguards: 'No<br><br>Social objectives are listed as being part of the process, but it is not articulated where in that process they are.',
                DonosignificantharmDNHS: 'No<br><br>DNSH is listed as being part of the screening process, but it is unclear how it is actually incorporated.',
                Intendedtobeinteroperable: 'Yes',
                MemberofIPFS: '',
                link: 'https://www.gfcpng.com/wp-content/uploads/2024/02/GF-IGFP-Booklet.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'No<br><br>"Protection and Recovery of Biodiversity and Ecosystems" is listed as an objective, but it is not articulated how that is evaluated, and there are no listed activities with TSC related to it.',
                country: 'Papua New Guinea'
            },
            {
                latitude: 14.562058,
                longitude: 120.987720,
                name: 'The Philippines Sustainable Finance Guiding Principles',
                yearissued: '2022',
                developer: 'Philippines Inter-Agency Technical Working Group for Sustainable Finance',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: '',
                objective: 'Climate Change Mitigation and Adaptation; Promoting Transition to a Low Carbon Economy; Resilient Food Systems; Sustainable Cities; Sustainable and Resilient Infrastructure for Inclusive Growth and Poverty Reduction; Environmental Management and Conservation; Prohibited Activities',
                linkpolicyobjectives: '',
                approachtoeligibility: '',
                sectorscovered: 'Agriculture; Waste; Indutsry; Transportation; Energy',
                Socialobjectivessafeguards: '',
                DonosignificantharmDNHS: '',
                Intendedtobeinteroperable: '',
                MemberofIPFS: 'No',
                link: 'https://www.bsp.gov.ph/Media_And_Research/Media%20Releases/2021_10/Sustainable%20Finance%20Guiding%20Principles.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'Yes<br><br>"Ensure a healthy ecosystem and biodiversity" is included as part of the Environmental Management and Conservation objective.',
                country: 'Philippines'
            },
            {
                latitude: 1.3521,
                longitude: 103.8198,
                name: 'Singapore-Asia Taxonomy for Sustainable Finance',
                link: 'https://www.mas.gov.sg/-/media/mas-media-library/development/sustainable-finance/singaporeasia-taxonomy-dec-2023.pdf',
                yearissued: '2023',
                mandatedinlaworvoluntary: 'Voluntary',
                developer: 'Monetary Authority of Singapore',
                objective: 'Climate Change Mitigation',
                linkpolicyobjectives: 'Paris Agreement: Yes <br><Br> Regional Frameworks: Yes <br><br> National Strategies: No',
                sectorscovered: 'The taxonomy states that stainable "For this version... which proposes activity-level criteria and thresholds for three of the eight focus sectors <br><br> (energy, transport, and buildings), GFIT decided to use a selection of ISIC codes within each of these three sectors. <br><br> However, it appears that the economy actually covers the eligibility of ISIC-coded activities in ten different sectors. These include Energy, Transport, Real Estate/Construction, Industry, Forestry, Carbon Capture and Storage, Information and Communications Technology, Waste, Water, and Agriculture.',
                approachtoeligibility: 'The taxonomy utilizes a "traffic light" system to classify certain activities as being "green", "amber", or "ineligible". A green activity is one that is deemed as being either carbon neutral or in line with the Paris Agreement goal of limiting global warming to 1.5 C. An amber activity is one that, while not currently in line with, is either "moving towards a Green transition pathway within a defined time frame; or facilitating significant emissions reductions in the short term with a prescribed sunset date."',
                basedonanothertaxonomy: 'Yes',
                Intendedtobeinteroperable: 'Yes<br><br>It is intended to be interoperable with other taxonomies, particularly that of the EU.',
                Purpose: 'Green: Yes<br><br>Technical Screening Criteria are provided to ensure that activities contribute to climate change mitigation.<br><br>Transition: Yes<br><br>Transition is facilitated through planning for stricter standards of eligibility over time. The taxonomy is deliberatly vague about how the specifics of those changes in order to maintain flexibility across different activities.<br><br>Ineligible: Yes <br><br> A list of ineligible activities is provided for 10 different sectors.',
                DonosignificantharmDNHS: 'No',
                Socialobjectivessafeguards: 'No',
                Additionalguidance: '-',
                otherusefuldocuments: '-',
                MemberofIPFS: 'Yes',
                Biodiversity: 'No',
                country: 'Singapore'
            },
            {
                latitude: -25.731340,
                longitude: 28.218370,
                name: 'South Africa Green Finance Taxonomy',
                yearissued: '2022',
                developer: 'South Africa&aposs National Treasury',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes <br> <br> Transition: No <br> <br> Ineligible: No',
                objective: 'Climate Change Mitigation; Climate Change Adaptation',
                linkpolicyobjectives: 'Paris Agreement: Yes <br> <br> Regional Framework: - <br> <br> National Strategies: -',
                approachtoeligibility: 'Activities must susbstantially contribute to one of the policy objectives according to the given technical screening criteria. Then,they must not significantly harm the other objective. Third, projects must have a climate resiliency plan to show they can withstand projected changes in conditions. Fourth, they must satisfy the Minimum Social Safeguards.',
                sectorscovered: 'The taxonomy includes technical screening criteria for 8 sectors. These include Agriculture, Forestry, and Fisheries; Industry; Energy; Water and Waste; Transportation; ICT; Construction; and Enabling Activities, System Resilience, & Innovation.',
                Socialobjectivessafeguards: 'No<br><br>While the taxonomy does reference the necesity of satisfying Minimum Social Safeguards, these safeguards include complying with pre-existing South African law and considering certain social factors which are not yet defined in this version of the taxonomy.',
                DonosignificantharmDNHS: 'Yes',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://www.treasury.gov.za/comm_media/press/2022/SA%20Green%20Finance%20Taxonomy%20-%201st%20Edition.pdf',
                Additionalguidance: 'https://sustainablefinanceinitiative.org.za/working-groups/taxonomy-working-group/#:~:text=More%20about%20the%20Taxonomy%20Working%20Group%20The%20purpose,Treasury%E2%80%99s%20Financing%20a%20Sustainable%20Economy%20Technical%20Paper%20%282020%29.',
                otherusefuldocuments: '-',
                Biodiversity: 'No',
                country: 'South Africa'
            },
            {
                latitude: 6.934175,
                longitude: 79.841834,
                name: 'Sri Lanka Green Finance Taxonomy',
                yearissued: '2022',
                developer: 'Central Bank of Sri Lanka',
                mandatedinlaworvoluntary: 'Mandatory',
                Purpose: 'Green: Yes<br><br>Transition: No<br><br>Ineligible: No',
                objective: 'Climate Change Mitigation; Climate Change Adaptation; Pollution Prevention and Control; Ecological Conservation and Resource Efficiency',
                linkpolicyobjectives: 'Paris Agreement: No<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'This taxonomy is primarily an eligibility list of certain activities, however many activities do have additional screening criteria in order to be considered eligible.',
                sectorscovered: 'Forest and Logging; Agriculture; Manufacturing; Electric Power Generation, Transmission and Distribution; Gas, Steam, and Air Conditioning Supply; Water Supply, Sewerage, and Waste Management; Construction; Transportation and Storage; Others; Financial Services; Tourism and Recreation; ICT',
                Socialobjectivessafeguards: 'No',
                DonosignificantharmDNHS: 'No<br><br>DNSH is listed as a guiding principle, but it is not uniformly applied.',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'Yes',
                link: 'https://www.cbsl.gov.lk/sites/default/files/cbslweb_documents/sl_green_finance_taxonomy.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'No<br><br>Consideration of biodiversity is limited to the determination of eligibility for activities involving the "Manufacture of liquid biofuel for use in transport with significantly reduced GHG emissions by using advanced technologies."',
                country: 'Sri Lanka'
            },
            {
                latitude: 13.769226161871838,
                longitude: 100.50077738958021,
                name: 'Thailand Taxonomy',
                yearissued: '2023',
                developer: 'Climate Bonds Initiative; Thailand Taxonomy Board',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>Ineligible: Yes',
                objective: 'Climate Change Mitigation',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: No<br><br>National Strategies: Yes',
                approachtoeligibility: 'This taxonomy includes a list of activities in two sectors with technical screening criteria. Activities are ultimately classified as either "Green", "Amber", or "Red".',
                sectorscovered: 'Energy; Transportation',
                Socialobjectivessafeguards: 'Yes<br><br>Minimum Social Safeguards include the IFC Performance Standards.',
                DonosignificantharmDNHS: 'Yes/NA<br><br>DNSH is included as part of the essential criteria. However, only a single objective has been defined, so it is unclear how DNSH would be applied.',
                Intendedtobeinteroperable: 'No',
                MemberofIPFS: 'No',
                link: 'https://www.bot.or.th/content/dam/bot/financial-innovation/sustainable-finance/green/Thailand_Taxonomy_Phase1_Jun2023_EN.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'No<br><br>Expected to be included in future versions.',
                country: 'Thailand'
            },
            {
                latitude: 8.983333,
                longitude: -79.516670,
                name: 'Common Framework of Sustainable Finance Taxonomies',
                yearissued: '2023',
                developer: 'United Nations Environmental Programme',
                mandatedinlaworvoluntary: 'Voluntary',
                Purpose: 'Green: Yes<br><br>Transition: Yes<br><br>Ineligible: Yes',
                objective: 'Climate Change Mitigation; Climate Change Adaptation',
                linkpolicyobjectives: 'Paris Agreement: Yes<br><br>Regional Frameworks: Yes<br><br>National Strategies: No',
                approachtoeligibility: 'This framework lays out different considerations for determining the eligibility of sustainability activities. The first is a substantial contribution to one of the objectives, and the different ways that could be measured. The second is the inclusion of enabling activities. The third is the inclusion of transition activities as defined by the IPSF. The fifth is the inclusion of "sectors with minimum performance". These include sectors which neither contribute to sustainability, nor have substantial negative effects on any objectives. This framework also recommends that taxonomies have exclusion lists for harmful activities. The framework also includes technical screening criteria as a key part of sustainable taxonomies. It describes different ways in which technical screening criteria can be applied to different sectors.',
                sectorscovered: 'Construction; Energy; Manufacturing; Agriculture, Forestry, and Land Use; Transportation; Water; Waste; Information and Communication Technology; Mining; Adaptation Related Activities Across Sectors',
                Socialobjectivessafeguards: 'No<br><br>The concept of Minimum Safeguards is explained in the framework. However, it is not explicitly included.',
                DonosignificantharmDNHS: 'No<br><br>The concept of DNSH is explained in the framework, but it is not explicitly included.',
                Intendedtobeinteroperable: 'No<br><br>However, it is intended to inspire taxonomies that are interoperable with each other.',
                MemberofIPFS: 'Obsever',
                link: 'file:///C:/Users/ArlenBelitsky/Downloads/Commonframework_sustainable_finance_taxonomies.pdf',
                Additionalguidance: '',
                otherusefuldocuments: '',
                Biodiversity: 'No',
                country: 'UNEP: Latin America & The Caribbean'
            }
        ];

        function featureToGeoJSON(taxonomy) {
            return {
                'type': 'Feature',
                'properties': {
                    'name': taxonomy.name,
                    'link': taxonomy.link
                },
                'geometry': {
                    'type': 'Point',
                    'coordinates': [taxonomy.longitude, taxonomy.latitude]
                }
            };
        }
        // ... (other code)

        const popup = new mapboxgl.Popup({
            closeButton: false,
            closeOnClick: true,
            className: 'custom-popup' // Add this classf
        });

        // Note: Ensure the function 'filterPopupContent' is defined elsewhere in your code to handle the input search functionality.


        map.on('load', () => {
            map.addSource('esgTaxonomies', {
                'type': 'geojson',
                'data': {
                    'type': 'FeatureCollection',
                    'features': esgTaxonomies.map(taxonomy => featureToGeoJSON(taxonomy))
                }
            });
            map.addLayer({
                'id': 'taxonomy-markers',
                'type': 'circle',
                'source': 'esgTaxonomies',
                'paint': {
                    'circle-color': 'green',
                    'circle-radius': 10,
                    'circle-stroke-width': 2,
                    'circle-stroke-color': 'white'
                }
            });

            // Only keep one definition of filterPopupContent function
            function filterPopupContent(inputElement) {
                const searchValue = inputElement.value.toLowerCase();
                const contentDiv = inputElement.nextElementSibling;
                const textElements = contentDiv.querySelectorAll('.popup-text');
                textElements.forEach(element => {
                    if (searchValue) {
                        element.innerHTML = highlightText(element.textContent, searchValue);
                    } else {
                        element.innerHTML = element.textContent;
                    }
                });
            }

            map.on('movestart', () => {
                map.setFilter('taxonomy-markers', ['has', 'name', false]);
            });
            map.on('moveend', () => {
                const features = map.queryRenderedFeatures({ layers: ['taxonomy-markers'] });
                if (features) {
                    renderListings(features);
                }
            });

        });

        function setupIndividualCollapsibles(popupContent) {
            const collapsibleHeaders = popupContent.querySelectorAll('.collapsible-header');
            collapsibleHeaders.forEach(header => {
                header.addEventListener('click', function () {
                    const content = this.nextElementSibling; // Assuming content directly follows header
                    const isVisible = content.style.display === 'block';
                    content.style.display = isVisible ? 'none' : 'block';

                    // Optional: Toggle arrow direction or class
                    const arrow = this.querySelector('.collapsible-arrow');
                    arrow.textContent = isVisible ? '▼' : '▲'; // Adjust symbols or toggle class as needed
                });
            });
        }

        function setupSearchInput(popupContent) {
            // Find the search input within the popup content
            const searchInput = popupContent.querySelector('input[type="text"]');

            // Attach an event listener to handle the input event
            searchInput.addEventListener('input', function () {
                // Call the filter function with the current value of the input and the popup content
                filterPopupContent(this.value, popupContent);
            });
        }

        function convertUrlsToLinks(text) {
            const urlRegex = /(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
            return text.replace(urlRegex, function (url) {
                return '<a href="' + url + '" target="_blank">' + url + '</a>';
            });
        }

        map.on('click', 'taxonomy-markers', (e) => {
            const taxonomyName = e.features[0].properties.name;
            const taxonomy = esgTaxonomies.find(item => item.name === taxonomyName);
            if (!taxonomy) return;

            const popupContent = document.createElement('div');
            popupContent.innerHTML = `
            <div class="popup-flex-container">
                <div class="search-bar-container" style="position: sticky; top: 0; z-index: 2; background: white;">
                    <input type="text" placeholder="Search...">
                </div>
                <div class="popup-content-details" style="overflow-y: auto; max-height: calc(100% - 60px);"> <!-- Adjust max-height as needed -->    
                <div class="popup-content-details">
                    <strong>Taxonomy:</strong> <span class="popup-text">${taxonomy.name}</span><br><br>
                    <strong>Year Issued:</strong> <span class="popup-text">${taxonomy.yearissued}</span><br><br>
                    <button id="expand-all">Expand All</button>
                    <button id="collapse-all">Collapse All</button><br><br>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Developer</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.developer}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Mandated?</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.mandatedinlaworvoluntary}</p>
                        </div>
                    </div>    
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Type</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.Purpose}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Objectives</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.objective}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Objectives of Interest</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.linkpolicyobjectives}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Approach to Eligibility</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.approachtoeligibility}</p>
                        </div>
                    </div>                    
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Sectors Covered</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.sectorscovered}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Social Objectives / Safeguards</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.Socialobjectivessafeguards}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Do No Significant Harm (DNSH)</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.DonosignificantharmDNHS}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Intended to be interoperable</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.Intendedtobeinteroperable}</p>
                        </div>
                     </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Biodiversity</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.Biodiversity}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Member of the IPFS</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.MemberofIPFS}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Taxonomy Source</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.link}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Additional guidance</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.Additionalguidance}</p>
                        </div>
                    </div>
                    <div class="collapsible">
                        <div class="collapsible-header">
                            <span>Other useful documents</span>
                            <span class="collapsible-arrow">&#9660;</span>
                        </div>
                        <div class="collapsible-content">
                            <p>${taxonomy.otherusefuldocuments}</p>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        `;
            // Convert URLs to links
            popupContent.innerHTML = convertUrlsToLinks(popupContent.innerHTML);

            // Setup collapsibles and search functionality
            setupIndividualCollapsibles(popupContent);
            // Set up search input functionality
            setupSearchInput(popupContent);

            // Show the popup
            new mapboxgl.Popup({
                closeButton: false,
                closeOnClick: true
            })
                .setLngLat(e.lngLat)
                .setDOMContent(popupContent)
                .addTo(map);

            // Generate and insert popup content with search functionality
            function generatePopupContent(taxonomy) {
                const popupContent = document.createElement('div');
                popupContent.innerHTML = `...`; // Existing HTML content goes here

                // Add a search input box to the popup content
                const searchInput = document.createElement('input');
                searchInput.type = 'text';
                searchInput.placeholder = 'Search...';
                searchInput.oninput = function () {
                    // Filter and highlight popup content based on search term
                    const term = this.value.trim();
                    const textElements = popupContent.querySelectorAll('.popup-text');
                    textElements.forEach(el => {
                        el.innerHTML = highlightText(el.textContent, term);
                    });
                };

                // Add the search input box at the beginning of the popup content
                popupContent.insertBefore(searchInput, popupContent.firstChild);

                return popupContent;
            }

            function convertUrlsToLinks(text) {
                const urlRegex = /(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
                return text.replace(urlRegex, function (url) {
                    return '<a href="' + url + '" target="_blank">' + url + '</a>';
                });
            }

            map.on('click', 'taxonomy-markers', (e) => {
                // ... (other code to generate popup content)

                const popupContent = document.createElement('div');
                popupContent.innerHTML =
                    // Set up search input functionality
                    setupSearchInput(popupContent);

                // Show the popup
                new mapboxgl.Popup({
                    closeButton: false,
                    closeOnClick: true
                })
                    .setLngLat(e.lngLat)
                    .setDOMContent(popupContent)
                    .addTo(map);
            });

            setupIndividualCollapsibles(popupContent);

            // Immediately append popupContent to the popup to ensure it's part of the DOM
            new mapboxgl.Popup({
                closeButton: false,
                closeOnClick: true
            })
                .setLngLat(e.lngLat)
                .setDOMContent(popupContent)
                .addTo(map);

            // After the popup is added to the map, find and setup the buttons
            setupPopupButtons(popupContent);
        });

        function setupPopupButtons(popupContent) {
            const expandAllBtn = popupContent.querySelector('#expand-all');
            const collapseAllBtn = popupContent.querySelector('#collapse-all');

            expandAllBtn.addEventListener('click', function () {
                toggleCollapsible(popupContent, true); // Expand all
            });

            collapseAllBtn.addEventListener('click', function () {
                toggleCollapsible(popupContent, false); // Collapse all
            });

            // Setup individual collapsible sections
            setupIndividualCollapsibles(popupContent);
        }

        function toggleCollapsible(popupContent, expand) {
            const collapsibles = popupContent.querySelectorAll('.collapsible-content');
            const arrows = popupContent.querySelectorAll('.collapsible-arrow');
            collapsibles.forEach((collapsible, index) => {
                collapsible.style.display = expand ? 'block' : 'none';
                arrows[index].textContent = expand ? '▲' : '▼'; // Adjust arrow symbol
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Assuming there are buttons with IDs 'expand-all' and 'collapse-all'
            const expandAllButton = document.getElementById('expand-all');
            const collapseAllButton = document.getElementById('collapse-all');

            // Function to expand all collapsible elements
            function expandAll() {
                document.querySelectorAll('.collapsible-content').forEach(function (content) {
                    content.style.display = 'block'; // Show content
                });
            }

            document.querySelector('input[type="text"]').addEventListener('input', function () {
                filterPopupContent(this);
            });


            // Function to collapse all collapsible elements
            function collapseAll() {
                document.querySelectorAll('.collapsible-content').forEach(function (content) {
                    content.style.display = 'none'; // Hide content
                });
            }

            // Ensure this function is called after the popup is added to the map and popupContent is part of the DOM
            function setupCollapsibles(popupContent) {
                const collapsibleHeaders = popupContent.querySelectorAll('.collapsible-header');
                collapsibleHeaders.forEach(header => {
                    header.addEventListener('click', function () {
                        const content = this.nextElementSibling; // Assuming content directly follows header
                        const isVisible = content.style.display === 'block';
                        content.style.display = isVisible ? 'none' : 'block';

                        // Optional: Toggle arrow direction or class
                        const arrow = this.querySelector('.collapsible-arrow');
                        arrow.textContent = isVisible ? '▼' : '▲'; // Adjust symbols or toggle class as needed
                    });
                });
            }

            // This function needs to be called after the popup content is fully loaded into the DOM.

            // Add event listeners to the buttons
            expandAllButton.addEventListener('click', expandAll);
            collapseAllButton.addEventListener('click', collapseAll);
        });

        // Use event delegation to handle events for dynamic popup elements
        document.addEventListener('click', function (event) {
            if (event.target.matches('.collapsible-header')) {
                // Handle collapsible toggling
                const header = event.target;
                const content = header.nextElementSibling;
                content.style.display = content.style.display === 'block' ? 'none' : 'block';
            } else if (event.target.matches('#expand-all')) {
                // Handle expanding all collapsibles
                const popupContent = event.target.closest('.popup-content-details');
                popupContent.querySelectorAll('.collapsible-content').forEach(content => {
                    content.style.display = 'block';
                });
            } else if (event.target.matches('#collapse-all')) {
                // Handle collapsing all collapsibles
                const popupContent = event.target.closest('.popup-content-details');
                popupContent.querySelectorAll('.collapsible-content').forEach(content => {
                    content.style.display = 'none';
                });
            }
        });

    </script>

</body>
